{"url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/pulls/740", "id": 1942501428, "node_id": "PR_kwDOAHUV8c5zyDg0", "html_url": "https://github.com/simple-salesforce/simple-salesforce/pull/740", "diff_url": "https://github.com/simple-salesforce/simple-salesforce/pull/740.diff", "patch_url": "https://github.com/simple-salesforce/simple-salesforce/pull/740.patch", "issue_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/issues/740", "number": 740, "state": "closed", "locked": false, "title": "Fix bulk2 upsert example", "user": {"login": "y-ken", "id": 1734549, "node_id": "MDQ6VXNlcjE3MzQ1NDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1734549?v=4", "gravatar_id": "", "url": "https://api.github.com/users/y-ken", "html_url": "https://github.com/y-ken", "followers_url": "https://api.github.com/users/y-ken/followers", "following_url": "https://api.github.com/users/y-ken/following{/other_user}", "gists_url": "https://api.github.com/users/y-ken/gists{/gist_id}", "starred_url": "https://api.github.com/users/y-ken/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/y-ken/subscriptions", "organizations_url": "https://api.github.com/users/y-ken/orgs", "repos_url": "https://api.github.com/users/y-ken/repos", "events_url": "https://api.github.com/users/y-ken/events{/privacy}", "received_events_url": "https://api.github.com/users/y-ken/received_events", "type": "User", "site_admin": false}, "body": "Hi, I have noticed non-working example in README.\r\n\r\n```\r\n>>> sf.bulk2.Service__c.upsert(\"./user_stat.csv\", 'Account_Id__c')\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/Users/y-ken/miniforge3/lib/python3.10/site-packages/simple_salesforce/bulk2.py\", line 1011, in upsert\r\n    records=_convert_dict_to_csv(\r\n  File \"/Users/y-ken/miniforge3/lib/python3.10/site-packages/simple_salesforce/bulk2.py\", line 234, in _convert_dict_to_csv\r\n    keys = set(i for s in [d.keys() for d in data] for i in s)\r\n  File \"/Users/y-ken/miniforge3/lib/python3.10/site-packages/simple_salesforce/bulk2.py\", line 234, in <listcomp>\r\n    keys = set(i for s in [d.keys() for d in data] for i in s)\r\nAttributeError: 'str' object has no attribute 'keys'\r\n```\r\n\r\nI have proposed suggestion that it works.\r\n\r\nthis is based on the actual implementation. and I have also checked with my local environment.\r\nhttps://github.com/simple-salesforce/simple-salesforce/blob/1d28fa18438d3840140900d4c00799798bad57b8/simple_salesforce/bulk2.py#L997-L1006\r\n\r\n", "created_at": "2024-06-27T14:28:12Z", "updated_at": "2024-07-18T20:32:55Z", "closed_at": "2024-07-18T20:32:54Z", "merged_at": "2024-07-18T20:32:54Z", "merge_commit_sha": "9b825c665e033081e14295f90cb8bf8a91a65916", "assignee": null, "assignees": [], "requested_reviewers": [], "requested_teams": [], "labels": [], "milestone": null, "draft": false, "commits_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/pulls/740/commits", "review_comments_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/pulls/740/comments", "review_comment_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/issues/740/comments", "statuses_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/statuses/d960bbd712d00a088a6b94324291f5c0a0555900", "head": {"label": "y-ken:patch-1", "ref": "patch-1", "sha": "d960bbd712d00a088a6b94324291f5c0a0555900", "user": {"login": "y-ken", "id": 1734549, "node_id": "MDQ6VXNlcjE3MzQ1NDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1734549?v=4", "gravatar_id": "", "url": "https://api.github.com/users/y-ken", "html_url": "https://github.com/y-ken", "followers_url": "https://api.github.com/users/y-ken/followers", "following_url": "https://api.github.com/users/y-ken/following{/other_user}", "gists_url": "https://api.github.com/users/y-ken/gists{/gist_id}", "starred_url": "https://api.github.com/users/y-ken/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/y-ken/subscriptions", "organizations_url": "https://api.github.com/users/y-ken/orgs", "repos_url": "https://api.github.com/users/y-ken/repos", "events_url": "https://api.github.com/users/y-ken/events{/privacy}", "received_events_url": "https://api.github.com/users/y-ken/received_events", "type": "User", "site_admin": false}, "repo": {"id": 820963168, "node_id": "R_kgDOMO7nYA", "name": "simple-salesforce", "full_name": "y-ken/simple-salesforce", "private": false, "owner": {"login": "y-ken", "id": 1734549, "node_id": "MDQ6VXNlcjE3MzQ1NDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1734549?v=4", "gravatar_id": "", "url": "https://api.github.com/users/y-ken", "html_url": "https://github.com/y-ken", "followers_url": "https://api.github.com/users/y-ken/followers", "following_url": "https://api.github.com/users/y-ken/following{/other_user}", "gists_url": "https://api.github.com/users/y-ken/gists{/gist_id}", "starred_url": "https://api.github.com/users/y-ken/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/y-ken/subscriptions", "organizations_url": "https://api.github.com/users/y-ken/orgs", "repos_url": "https://api.github.com/users/y-ken/repos", "events_url": "https://api.github.com/users/y-ken/events{/privacy}", "received_events_url": "https://api.github.com/users/y-ken/received_events", "type": "User", "site_admin": false}, "html_url": "https://github.com/y-ken/simple-salesforce", "description": "A very simple Salesforce.com REST API client for Python", "fork": true, "url": "https://api.github.com/repos/y-ken/simple-salesforce", "forks_url": "https://api.github.com/repos/y-ken/simple-salesforce/forks", "keys_url": "https://api.github.com/repos/y-ken/simple-salesforce/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/y-ken/simple-salesforce/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/y-ken/simple-salesforce/teams", "hooks_url": "https://api.github.com/repos/y-ken/simple-salesforce/hooks", "issue_events_url": "https://api.github.com/repos/y-ken/simple-salesforce/issues/events{/number}", "events_url": "https://api.github.com/repos/y-ken/simple-salesforce/events", "assignees_url": "https://api.github.com/repos/y-ken/simple-salesforce/assignees{/user}", "branches_url": "https://api.github.com/repos/y-ken/simple-salesforce/branches{/branch}", "tags_url": "https://api.github.com/repos/y-ken/simple-salesforce/tags", "blobs_url": "https://api.github.com/repos/y-ken/simple-salesforce/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/y-ken/simple-salesforce/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/y-ken/simple-salesforce/git/refs{/sha}", "trees_url": "https://api.github.com/repos/y-ken/simple-salesforce/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/y-ken/simple-salesforce/statuses/{sha}", "languages_url": "https://api.github.com/repos/y-ken/simple-salesforce/languages", "stargazers_url": "https://api.github.com/repos/y-ken/simple-salesforce/stargazers", "contributors_url": "https://api.github.com/repos/y-ken/simple-salesforce/contributors", "subscribers_url": "https://api.github.com/repos/y-ken/simple-salesforce/subscribers", "subscription_url": "https://api.github.com/repos/y-ken/simple-salesforce/subscription", "commits_url": "https://api.github.com/repos/y-ken/simple-salesforce/commits{/sha}", "git_commits_url": "https://api.github.com/repos/y-ken/simple-salesforce/git/commits{/sha}", "comments_url": "https://api.github.com/repos/y-ken/simple-salesforce/comments{/number}", "issue_comment_url": "https://api.github.com/repos/y-ken/simple-salesforce/issues/comments{/number}", "contents_url": "https://api.github.com/repos/y-ken/simple-salesforce/contents/{+path}", "compare_url": "https://api.github.com/repos/y-ken/simple-salesforce/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/y-ken/simple-salesforce/merges", "archive_url": "https://api.github.com/repos/y-ken/simple-salesforce/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/y-ken/simple-salesforce/downloads", "issues_url": "https://api.github.com/repos/y-ken/simple-salesforce/issues{/number}", "pulls_url": "https://api.github.com/repos/y-ken/simple-salesforce/pulls{/number}", "milestones_url": "https://api.github.com/repos/y-ken/simple-salesforce/milestones{/number}", "notifications_url": "https://api.github.com/repos/y-ken/simple-salesforce/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/y-ken/simple-salesforce/labels{/name}", "releases_url": "https://api.github.com/repos/y-ken/simple-salesforce/releases{/id}", "deployments_url": "https://api.github.com/repos/y-ken/simple-salesforce/deployments", "created_at": "2024-06-27T14:25:34Z", "updated_at": "2024-06-27T14:25:34Z", "pushed_at": "2024-06-27T14:45:28Z", "git_url": "git://github.com/y-ken/simple-salesforce.git", "ssh_url": "git@github.com:y-ken/simple-salesforce.git", "clone_url": "https://github.com/y-ken/simple-salesforce.git", "svn_url": "https://github.com/y-ken/simple-salesforce", "homepage": null, "size": 763, "stargazers_count": 0, "watchers_count": 0, "language": null, "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "has_discussions": false, "forks_count": 0, "mirror_url": null, "archived": false, "disabled": false, "open_issues_count": 0, "license": {"key": "other", "name": "Other", "spdx_id": "NOASSERTION", "url": null, "node_id": "MDc6TGljZW5zZTA="}, "allow_forking": true, "is_template": false, "web_commit_signoff_required": false, "topics": [], "visibility": "public", "forks": 0, "open_issues": 0, "watchers": 0, "default_branch": "master"}}, "base": {"label": "simple-salesforce:release/v1.12.7", "ref": "release/v1.12.7", "sha": "1d28fa18438d3840140900d4c00799798bad57b8", "user": {"login": "simple-salesforce", "id": 19581234, "node_id": "MDEyOk9yZ2FuaXphdGlvbjE5NTgxMjM0", "avatar_url": "https://avatars.githubusercontent.com/u/19581234?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simple-salesforce", "html_url": "https://github.com/simple-salesforce", "followers_url": "https://api.github.com/users/simple-salesforce/followers", "following_url": "https://api.github.com/users/simple-salesforce/following{/other_user}", "gists_url": "https://api.github.com/users/simple-salesforce/gists{/gist_id}", "starred_url": "https://api.github.com/users/simple-salesforce/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simple-salesforce/subscriptions", "organizations_url": "https://api.github.com/users/simple-salesforce/orgs", "repos_url": "https://api.github.com/users/simple-salesforce/repos", "events_url": "https://api.github.com/users/simple-salesforce/events{/privacy}", "received_events_url": "https://api.github.com/users/simple-salesforce/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 7673329, "node_id": "MDEwOlJlcG9zaXRvcnk3NjczMzI5", "name": "simple-salesforce", "full_name": "simple-salesforce/simple-salesforce", "private": false, "owner": {"login": "simple-salesforce", "id": 19581234, "node_id": "MDEyOk9yZ2FuaXphdGlvbjE5NTgxMjM0", "avatar_url": "https://avatars.githubusercontent.com/u/19581234?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simple-salesforce", "html_url": "https://github.com/simple-salesforce", "followers_url": "https://api.github.com/users/simple-salesforce/followers", "following_url": "https://api.github.com/users/simple-salesforce/following{/other_user}", "gists_url": "https://api.github.com/users/simple-salesforce/gists{/gist_id}", "starred_url": "https://api.github.com/users/simple-salesforce/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simple-salesforce/subscriptions", "organizations_url": "https://api.github.com/users/simple-salesforce/orgs", "repos_url": "https://api.github.com/users/simple-salesforce/repos", "events_url": "https://api.github.com/users/simple-salesforce/events{/privacy}", "received_events_url": "https://api.github.com/users/simple-salesforce/received_events", "type": "Organization", "site_admin": false}, "html_url": "https://github.com/simple-salesforce/simple-salesforce", "description": "A very simple Salesforce.com REST API client for Python", "fork": false, "url": "https://api.github.com/repos/simple-salesforce/simple-salesforce", "forks_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/forks", "keys_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/teams", "hooks_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/hooks", "issue_events_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/issues/events{/number}", "events_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/events", "assignees_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/assignees{/user}", "branches_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/branches{/branch}", "tags_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/tags", "blobs_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/git/refs{/sha}", "trees_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/statuses/{sha}", "languages_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/languages", "stargazers_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/stargazers", "contributors_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/contributors", "subscribers_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/subscribers", "subscription_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/subscription", "commits_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/commits{/sha}", "git_commits_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/git/commits{/sha}", "comments_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/comments{/number}", "issue_comment_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/issues/comments{/number}", "contents_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/contents/{+path}", "compare_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/merges", "archive_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/downloads", "issues_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/issues{/number}", "pulls_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/pulls{/number}", "milestones_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/milestones{/number}", "notifications_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/labels{/name}", "releases_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/releases{/id}", "deployments_url": "https://api.github.com/repos/simple-salesforce/simple-salesforce/deployments", "created_at": "2013-01-17T20:08:57Z", "updated_at": "2024-08-24T17:45:13Z", "pushed_at": "2024-08-06T14:00:56Z", "git_url": "git://github.com/simple-salesforce/simple-salesforce.git", "ssh_url": "git@github.com:simple-salesforce/simple-salesforce.git", "clone_url": "https://github.com/simple-salesforce/simple-salesforce.git", "svn_url": "https://github.com/simple-salesforce/simple-salesforce", "homepage": null, "size": 768, "stargazers_count": 1647, "watchers_count": 1647, "language": "Python", "has_issues": true, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "has_discussions": false, "forks_count": 672, "mirror_url": null, "archived": false, "disabled": false, "open_issues_count": 202, "license": {"key": "other", "name": "Other", "spdx_id": "NOASSERTION", "url": null, "node_id": "MDc6TGljZW5zZTA="}, "allow_forking": true, "is_template": false, "web_commit_signoff_required": false, "topics": ["api", "api-client", "python", "salesforce"], "visibility": "public", "forks": 672, "open_issues": 202, "watchers": 1647, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/simple-salesforce/simple-salesforce/pulls/740"}, "html": {"href": "https://github.com/simple-salesforce/simple-salesforce/pull/740"}, "issue": {"href": "https://api.github.com/repos/simple-salesforce/simple-salesforce/issues/740"}, "comments": {"href": "https://api.github.com/repos/simple-salesforce/simple-salesforce/issues/740/comments"}, "review_comments": {"href": "https://api.github.com/repos/simple-salesforce/simple-salesforce/pulls/740/comments"}, "review_comment": {"href": "https://api.github.com/repos/simple-salesforce/simple-salesforce/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/simple-salesforce/simple-salesforce/pulls/740/commits"}, "statuses": {"href": "https://api.github.com/repos/simple-salesforce/simple-salesforce/statuses/d960bbd712d00a088a6b94324291f5c0a0555900"}}, "author_association": "NONE", "auto_merge": null, "active_lock_reason": null, "resolved_issues": []}
