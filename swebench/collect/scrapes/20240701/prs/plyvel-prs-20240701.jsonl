{"url": "https://api.github.com/repos/wbolster/plyvel/pulls/162", "id": 1869399595, "node_id": "PR_kwDOAGO0Cc5vbMYr", "html_url": "https://github.com/wbolster/plyvel/pull/162", "diff_url": "https://github.com/wbolster/plyvel/pull/162.diff", "patch_url": "https://github.com/wbolster/plyvel/pull/162.patch", "issue_url": "https://api.github.com/repos/wbolster/plyvel/issues/162", "number": 162, "state": "closed", "locked": false, "title": "Raise TypeError when attempting \u2018in\u2019, \u2018not in\u2019, and __contains__", "user": {"login": "wbolster", "id": 748944, "node_id": "MDQ6VXNlcjc0ODk0NA==", "avatar_url": "https://avatars.githubusercontent.com/u/748944?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wbolster", "html_url": "https://github.com/wbolster", "followers_url": "https://api.github.com/users/wbolster/followers", "following_url": "https://api.github.com/users/wbolster/following{/other_user}", "gists_url": "https://api.github.com/users/wbolster/gists{/gist_id}", "starred_url": "https://api.github.com/users/wbolster/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wbolster/subscriptions", "organizations_url": "https://api.github.com/users/wbolster/orgs", "repos_url": "https://api.github.com/users/wbolster/repos", "events_url": "https://api.github.com/users/wbolster/events{/privacy}", "received_events_url": "https://api.github.com/users/wbolster/received_events", "type": "User", "site_admin": false}, "body": "The \u2018in\u2019 operator has fallback behaviour for objects that do not specify `__contains__`, see\r\nhttps://docs.python.org/3/reference/expressions.html#membership-test-details\r\n\r\nVarious Plyvel classes have `.__iter__()` methods, so this means that \u2018key in db\u2019 actually iterates over the db, which yields \u2018(key, value)\u2019 tuples, none of which will be equal to plain \u2018key\u2019. For comparison, (key, value) in db actually works\u2026 accidentally!\r\n\r\nFor non-matches (always in practice) such as an innocent looking key lookup means the whole database is iterated (extremely slow for larger databases), and will always return False in the end. This is unexpected and bad behaviour.\r\n\r\nInstead, detect this and raise TypeError with a helpful error message.\r\n\r\nCloses #26.", "created_at": "2024-05-14T16:26:46Z", "updated_at": "2024-05-15T12:14:34Z", "closed_at": "2024-05-15T12:14:15Z", "merged_at": "2024-05-15T12:14:15Z", "merge_commit_sha": "d32894220cdf406c3fb89e62f739d6d6b8d01b9c", "assignee": {"login": "wbolster", "id": 748944, "node_id": "MDQ6VXNlcjc0ODk0NA==", "avatar_url": "https://avatars.githubusercontent.com/u/748944?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wbolster", "html_url": "https://github.com/wbolster", "followers_url": "https://api.github.com/users/wbolster/followers", "following_url": "https://api.github.com/users/wbolster/following{/other_user}", "gists_url": "https://api.github.com/users/wbolster/gists{/gist_id}", "starred_url": "https://api.github.com/users/wbolster/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wbolster/subscriptions", "organizations_url": "https://api.github.com/users/wbolster/orgs", "repos_url": "https://api.github.com/users/wbolster/repos", "events_url": "https://api.github.com/users/wbolster/events{/privacy}", "received_events_url": "https://api.github.com/users/wbolster/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wbolster", "id": 748944, "node_id": "MDQ6VXNlcjc0ODk0NA==", "avatar_url": "https://avatars.githubusercontent.com/u/748944?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wbolster", "html_url": "https://github.com/wbolster", "followers_url": "https://api.github.com/users/wbolster/followers", "following_url": "https://api.github.com/users/wbolster/following{/other_user}", "gists_url": "https://api.github.com/users/wbolster/gists{/gist_id}", "starred_url": "https://api.github.com/users/wbolster/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wbolster/subscriptions", "organizations_url": "https://api.github.com/users/wbolster/orgs", "repos_url": "https://api.github.com/users/wbolster/repos", "events_url": "https://api.github.com/users/wbolster/events{/privacy}", "received_events_url": "https://api.github.com/users/wbolster/received_events", "type": "User", "site_admin": false}], "requested_reviewers": [], "requested_teams": [], "labels": [{"id": 18350821, "node_id": "MDU6TGFiZWwxODM1MDgyMQ==", "url": "https://api.github.com/repos/wbolster/plyvel/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "milestone": null, "draft": false, "commits_url": "https://api.github.com/repos/wbolster/plyvel/pulls/162/commits", "review_comments_url": "https://api.github.com/repos/wbolster/plyvel/pulls/162/comments", "review_comment_url": "https://api.github.com/repos/wbolster/plyvel/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/wbolster/plyvel/issues/162/comments", "statuses_url": "https://api.github.com/repos/wbolster/plyvel/statuses/d7d0be5d3af2d6b4981b94cd38fef77cb26948c5", "head": {"label": "wbolster:dunder-contains", "ref": "dunder-contains", "sha": "d7d0be5d3af2d6b4981b94cd38fef77cb26948c5", "user": {"login": "wbolster", "id": 748944, "node_id": "MDQ6VXNlcjc0ODk0NA==", "avatar_url": "https://avatars.githubusercontent.com/u/748944?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wbolster", "html_url": "https://github.com/wbolster", "followers_url": "https://api.github.com/users/wbolster/followers", "following_url": "https://api.github.com/users/wbolster/following{/other_user}", "gists_url": "https://api.github.com/users/wbolster/gists{/gist_id}", "starred_url": "https://api.github.com/users/wbolster/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wbolster/subscriptions", "organizations_url": "https://api.github.com/users/wbolster/orgs", "repos_url": "https://api.github.com/users/wbolster/repos", "events_url": "https://api.github.com/users/wbolster/events{/privacy}", "received_events_url": "https://api.github.com/users/wbolster/received_events", "type": "User", "site_admin": false}, "repo": {"id": 6534153, "node_id": "MDEwOlJlcG9zaXRvcnk2NTM0MTUz", "name": "plyvel", "full_name": "wbolster/plyvel", "private": false, "owner": {"login": "wbolster", "id": 748944, "node_id": "MDQ6VXNlcjc0ODk0NA==", "avatar_url": "https://avatars.githubusercontent.com/u/748944?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wbolster", "html_url": "https://github.com/wbolster", "followers_url": "https://api.github.com/users/wbolster/followers", "following_url": "https://api.github.com/users/wbolster/following{/other_user}", "gists_url": "https://api.github.com/users/wbolster/gists{/gist_id}", "starred_url": "https://api.github.com/users/wbolster/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wbolster/subscriptions", "organizations_url": "https://api.github.com/users/wbolster/orgs", "repos_url": "https://api.github.com/users/wbolster/repos", "events_url": "https://api.github.com/users/wbolster/events{/privacy}", "received_events_url": "https://api.github.com/users/wbolster/received_events", "type": "User", "site_admin": false}, "html_url": "https://github.com/wbolster/plyvel", "description": "Plyvel, a fast and feature-rich Python interface to LevelDB", "fork": false, "url": "https://api.github.com/repos/wbolster/plyvel", "forks_url": "https://api.github.com/repos/wbolster/plyvel/forks", "keys_url": "https://api.github.com/repos/wbolster/plyvel/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/wbolster/plyvel/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/wbolster/plyvel/teams", "hooks_url": "https://api.github.com/repos/wbolster/plyvel/hooks", "issue_events_url": "https://api.github.com/repos/wbolster/plyvel/issues/events{/number}", "events_url": "https://api.github.com/repos/wbolster/plyvel/events", "assignees_url": "https://api.github.com/repos/wbolster/plyvel/assignees{/user}", "branches_url": "https://api.github.com/repos/wbolster/plyvel/branches{/branch}", "tags_url": "https://api.github.com/repos/wbolster/plyvel/tags", "blobs_url": "https://api.github.com/repos/wbolster/plyvel/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/wbolster/plyvel/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/wbolster/plyvel/git/refs{/sha}", "trees_url": "https://api.github.com/repos/wbolster/plyvel/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/wbolster/plyvel/statuses/{sha}", "languages_url": "https://api.github.com/repos/wbolster/plyvel/languages", "stargazers_url": "https://api.github.com/repos/wbolster/plyvel/stargazers", "contributors_url": "https://api.github.com/repos/wbolster/plyvel/contributors", "subscribers_url": "https://api.github.com/repos/wbolster/plyvel/subscribers", "subscription_url": "https://api.github.com/repos/wbolster/plyvel/subscription", "commits_url": "https://api.github.com/repos/wbolster/plyvel/commits{/sha}", "git_commits_url": "https://api.github.com/repos/wbolster/plyvel/git/commits{/sha}", "comments_url": "https://api.github.com/repos/wbolster/plyvel/comments{/number}", "issue_comment_url": "https://api.github.com/repos/wbolster/plyvel/issues/comments{/number}", "contents_url": "https://api.github.com/repos/wbolster/plyvel/contents/{+path}", "compare_url": "https://api.github.com/repos/wbolster/plyvel/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/wbolster/plyvel/merges", "archive_url": "https://api.github.com/repos/wbolster/plyvel/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/wbolster/plyvel/downloads", "issues_url": "https://api.github.com/repos/wbolster/plyvel/issues{/number}", "pulls_url": "https://api.github.com/repos/wbolster/plyvel/pulls{/number}", "milestones_url": "https://api.github.com/repos/wbolster/plyvel/milestones{/number}", "notifications_url": "https://api.github.com/repos/wbolster/plyvel/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/wbolster/plyvel/labels{/name}", "releases_url": "https://api.github.com/repos/wbolster/plyvel/releases{/id}", "deployments_url": "https://api.github.com/repos/wbolster/plyvel/deployments", "created_at": "2012-11-04T19:01:08Z", "updated_at": "2024-08-25T14:40:14Z", "pushed_at": "2024-05-15T12:47:48Z", "git_url": "git://github.com/wbolster/plyvel.git", "ssh_url": "git@github.com:wbolster/plyvel.git", "clone_url": "https://github.com/wbolster/plyvel.git", "svn_url": "https://github.com/wbolster/plyvel", "homepage": "https://plyvel.readthedocs.io/", "size": 2001, "stargazers_count": 528, "watchers_count": 528, "language": "Cython", "has_issues": true, "has_projects": true, "has_downloads": true, "has_wiki": false, "has_pages": false, "has_discussions": false, "forks_count": 75, "mirror_url": null, "archived": false, "disabled": false, "open_issues_count": 22, "license": {"key": "other", "name": "Other", "spdx_id": "NOASSERTION", "url": null, "node_id": "MDc6TGljZW5zZTA="}, "allow_forking": true, "is_template": false, "web_commit_signoff_required": false, "topics": [], "visibility": "public", "forks": 75, "open_issues": 22, "watchers": 528, "default_branch": "main"}}, "base": {"label": "wbolster:main", "ref": "main", "sha": "7395215fb19e01796d51474d40331eebbae28dc0", "user": {"login": "wbolster", "id": 748944, "node_id": "MDQ6VXNlcjc0ODk0NA==", "avatar_url": "https://avatars.githubusercontent.com/u/748944?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wbolster", "html_url": "https://github.com/wbolster", "followers_url": "https://api.github.com/users/wbolster/followers", "following_url": "https://api.github.com/users/wbolster/following{/other_user}", "gists_url": "https://api.github.com/users/wbolster/gists{/gist_id}", "starred_url": "https://api.github.com/users/wbolster/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wbolster/subscriptions", "organizations_url": "https://api.github.com/users/wbolster/orgs", "repos_url": "https://api.github.com/users/wbolster/repos", "events_url": "https://api.github.com/users/wbolster/events{/privacy}", "received_events_url": "https://api.github.com/users/wbolster/received_events", "type": "User", "site_admin": false}, "repo": {"id": 6534153, "node_id": "MDEwOlJlcG9zaXRvcnk2NTM0MTUz", "name": "plyvel", "full_name": "wbolster/plyvel", "private": false, "owner": {"login": "wbolster", "id": 748944, "node_id": "MDQ6VXNlcjc0ODk0NA==", "avatar_url": "https://avatars.githubusercontent.com/u/748944?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wbolster", "html_url": "https://github.com/wbolster", "followers_url": "https://api.github.com/users/wbolster/followers", "following_url": "https://api.github.com/users/wbolster/following{/other_user}", "gists_url": "https://api.github.com/users/wbolster/gists{/gist_id}", "starred_url": "https://api.github.com/users/wbolster/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wbolster/subscriptions", "organizations_url": "https://api.github.com/users/wbolster/orgs", "repos_url": "https://api.github.com/users/wbolster/repos", "events_url": "https://api.github.com/users/wbolster/events{/privacy}", "received_events_url": "https://api.github.com/users/wbolster/received_events", "type": "User", "site_admin": false}, "html_url": "https://github.com/wbolster/plyvel", "description": "Plyvel, a fast and feature-rich Python interface to LevelDB", "fork": false, "url": "https://api.github.com/repos/wbolster/plyvel", "forks_url": "https://api.github.com/repos/wbolster/plyvel/forks", "keys_url": "https://api.github.com/repos/wbolster/plyvel/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/wbolster/plyvel/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/wbolster/plyvel/teams", "hooks_url": "https://api.github.com/repos/wbolster/plyvel/hooks", "issue_events_url": "https://api.github.com/repos/wbolster/plyvel/issues/events{/number}", "events_url": "https://api.github.com/repos/wbolster/plyvel/events", "assignees_url": "https://api.github.com/repos/wbolster/plyvel/assignees{/user}", "branches_url": "https://api.github.com/repos/wbolster/plyvel/branches{/branch}", "tags_url": "https://api.github.com/repos/wbolster/plyvel/tags", "blobs_url": "https://api.github.com/repos/wbolster/plyvel/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/wbolster/plyvel/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/wbolster/plyvel/git/refs{/sha}", "trees_url": "https://api.github.com/repos/wbolster/plyvel/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/wbolster/plyvel/statuses/{sha}", "languages_url": "https://api.github.com/repos/wbolster/plyvel/languages", "stargazers_url": "https://api.github.com/repos/wbolster/plyvel/stargazers", "contributors_url": "https://api.github.com/repos/wbolster/plyvel/contributors", "subscribers_url": "https://api.github.com/repos/wbolster/plyvel/subscribers", "subscription_url": "https://api.github.com/repos/wbolster/plyvel/subscription", "commits_url": "https://api.github.com/repos/wbolster/plyvel/commits{/sha}", "git_commits_url": "https://api.github.com/repos/wbolster/plyvel/git/commits{/sha}", "comments_url": "https://api.github.com/repos/wbolster/plyvel/comments{/number}", "issue_comment_url": "https://api.github.com/repos/wbolster/plyvel/issues/comments{/number}", "contents_url": "https://api.github.com/repos/wbolster/plyvel/contents/{+path}", "compare_url": "https://api.github.com/repos/wbolster/plyvel/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/wbolster/plyvel/merges", "archive_url": "https://api.github.com/repos/wbolster/plyvel/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/wbolster/plyvel/downloads", "issues_url": "https://api.github.com/repos/wbolster/plyvel/issues{/number}", "pulls_url": "https://api.github.com/repos/wbolster/plyvel/pulls{/number}", "milestones_url": "https://api.github.com/repos/wbolster/plyvel/milestones{/number}", "notifications_url": "https://api.github.com/repos/wbolster/plyvel/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/wbolster/plyvel/labels{/name}", "releases_url": "https://api.github.com/repos/wbolster/plyvel/releases{/id}", "deployments_url": "https://api.github.com/repos/wbolster/plyvel/deployments", "created_at": "2012-11-04T19:01:08Z", "updated_at": "2024-08-25T14:40:14Z", "pushed_at": "2024-05-15T12:47:48Z", "git_url": "git://github.com/wbolster/plyvel.git", "ssh_url": "git@github.com:wbolster/plyvel.git", "clone_url": "https://github.com/wbolster/plyvel.git", "svn_url": "https://github.com/wbolster/plyvel", "homepage": "https://plyvel.readthedocs.io/", "size": 2001, "stargazers_count": 528, "watchers_count": 528, "language": "Cython", "has_issues": true, "has_projects": true, "has_downloads": true, "has_wiki": false, "has_pages": false, "has_discussions": false, "forks_count": 75, "mirror_url": null, "archived": false, "disabled": false, "open_issues_count": 22, "license": {"key": "other", "name": "Other", "spdx_id": "NOASSERTION", "url": null, "node_id": "MDc6TGljZW5zZTA="}, "allow_forking": true, "is_template": false, "web_commit_signoff_required": false, "topics": [], "visibility": "public", "forks": 75, "open_issues": 22, "watchers": 528, "default_branch": "main"}}, "_links": {"self": {"href": "https://api.github.com/repos/wbolster/plyvel/pulls/162"}, "html": {"href": "https://github.com/wbolster/plyvel/pull/162"}, "issue": {"href": "https://api.github.com/repos/wbolster/plyvel/issues/162"}, "comments": {"href": "https://api.github.com/repos/wbolster/plyvel/issues/162/comments"}, "review_comments": {"href": "https://api.github.com/repos/wbolster/plyvel/pulls/162/comments"}, "review_comment": {"href": "https://api.github.com/repos/wbolster/plyvel/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/wbolster/plyvel/pulls/162/commits"}, "statuses": {"href": "https://api.github.com/repos/wbolster/plyvel/statuses/d7d0be5d3af2d6b4981b94cd38fef77cb26948c5"}}, "author_association": "OWNER", "auto_merge": null, "active_lock_reason": null, "resolved_issues": ["26"]}
