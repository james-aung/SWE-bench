{"url": "https://api.github.com/repos/GeoStat-Framework/pentapy/pulls/26", "id": 1910414520, "node_id": "PR_kwDOCmT1o85x3py4", "html_url": "https://github.com/GeoStat-Framework/pentapy/pull/26", "diff_url": "https://github.com/GeoStat-Framework/pentapy/pull/26.diff", "patch_url": "https://github.com/GeoStat-Framework/pentapy/pull/26.patch", "issue_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/issues/26", "number": 26, "state": "closed", "locked": false, "title": "Enable multiple right-hand sides, fix C-division and `n=3`-edge case, made tests elaborate", "user": {"login": "MothNik", "id": 70107495, "node_id": "MDQ6VXNlcjcwMTA3NDk1", "avatar_url": "https://avatars.githubusercontent.com/u/70107495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MothNik", "html_url": "https://github.com/MothNik", "followers_url": "https://api.github.com/users/MothNik/followers", "following_url": "https://api.github.com/users/MothNik/following{/other_user}", "gists_url": "https://api.github.com/users/MothNik/gists{/gist_id}", "starred_url": "https://api.github.com/users/MothNik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MothNik/subscriptions", "organizations_url": "https://api.github.com/users/MothNik/orgs", "repos_url": "https://api.github.com/users/MothNik/repos", "events_url": "https://api.github.com/users/MothNik/events{/privacy}", "received_events_url": "https://api.github.com/users/MothNik/received_events", "type": "User", "site_admin": false}, "body": "**Edit June 09, 2024**\r\n#27 is an improved version of this pull request. The following describes the basic changes that #27 relies on. However, this pull request is not really required anymore. I will still leave it open for a bit.<br><br><br>\r\n\r\nThis pull request primarily tackles #11 by enabling multiple right hand sides for the `pentapy`-solvers. Currently, this is only implemented in a serial fashion because the current API does not specify [the memory layout](https://cython.readthedocs.io/en/latest/src/userguide/memoryviews.html#c-and-fortran-contiguous-memoryviews) of the input Arrays. This makes it quite hard to completely remove the GIL which is required for parallelization of Cython level, **but the serial fashion implements the feature in a first step** \u2705 \r\nImplementing this required a shotgun refactoring on Cython-level for a consistent, scalable flow and memory handling that relies on memoisation.\r\n\r\nFurthermore the pull request fixes\r\n- #23 to acutally rely on the error handling that was never triggered,\r\n- #24 via a fallback to NumPy.\r\n- #25 by dropping the superficial `unittest` for an extensive, parallelized `pytest` test suite which can now be run by \r\n    ```bash\r\n    pytest  --cov=pentapy .\\tests  -n=auto --cov-report html\r\n    ```\r\n    This **increased the coverage to 100%**. It started out from 80% on a line-hit basis, but the test was not really testing the package. Now, many different combinations and scenarios are covered, so the coverage increase is way more than the visible 20%. Anyway, the coverage was pretty meaningless before because it was not really considered in the package development. As an example it uncovered #23 showing two massively red uncovered blocks at the first test that was run. \r\n\r\nI've found the development with the current package setup causes so much friction on simple tasks and maintainability was not really facilitated, so \r\n- the internal handling for the solver aliases (\"1\", 1, \"PTRANS-I\", etc.), that introduced super much duplicated code, could be highly simplified by transitioning to a straightforward and safe approach based on an `Enum`-conversion and only relying on single checks. Also, the string-input was made case-insensitive.\r\n- empty lines were inserted between blocks of coherent logics to make it human- and not only machine-readable and reduce the risk for bugs by overlooking a line.\r\n- the Cython functions are now documented with comments and docstrings on the low level implementation details given that they are the centrepiece of the package after all.\r\n- extensive tests were added for the external solvers because providing this functionality untested is a bit shady, especially when they are also excluded from coverage. They don't need to be tested extensively, but automated tests whether they are even callable are the bare minimum that has to be provided.\r\n- tests were also added for the error handling, which is one of the key parts of the package. \r\n- requirements were moved (mabye back?) to files that are dynamically linked in the `pyproject.toml`. To install a new dependency for development, `pip install -r some_requirements.txt` is way simpler than `pip install pentapy[...]` which takes very long for rebuilding `pentapy`. Actually, I'm not even sure whether all the development requirements should be in the `pyproject.toml`.\r\n    Nobody who just installs the package will notice the difference, but for development, this ensures a proper workflow.\r\n    **NOTE:** this was done in a [single commit](https://github.com/GeoStat-Framework/pentapy/commit/b4190f8144a24a122cf79c6724bb5ef938278dae), so it can be reverted in one go if desired.\r\n- error messages were enriched with debug information that the user can also work with, e.g., `matrix has to be n x n` is now `matrix has to be n x n, got 10 x 15`, so the user knows where to check.\r\n- `pentapy.solve` is now fully typed, especially the `solver`-argument which can be specified by so many literals that leaving it untyped reduces the joy to work with it. Now, any IDE will show all the options as one hovers over the function name and also autocompletion with proper input is now easily possible.\r\n\r\nFinally, some typos were fixed. With a VSCode extension like CSpell or a similar spell checker, this can be avioded.\r\n\r\nI tried to update the changelog, but feel free to adapt this. I don't really know what has to be updated in terms of other documentations and stuff around, but you know better. I also don't know **where to update the version and if these changes are a minor or a major jump for the version**.\r\n\r\nI really hope that I didn't miss anything, but all the new tests pass and the bound checker never ran into an out of bounds error \u2705\r\n\r\nSorry, that this is such a big PR, but I would not have been able to ensure that everything works fine with the current package setup \ud83d\ude4f ", "created_at": "2024-06-08T20:25:05Z", "updated_at": "2024-07-23T19:13:35Z", "closed_at": "2024-07-23T19:13:35Z", "merged_at": null, "merge_commit_sha": "67e1237a920df9d68f7ef2553ad1f50767f29ef5", "assignee": null, "assignees": [], "requested_reviewers": [], "requested_teams": [], "labels": [], "milestone": null, "draft": true, "commits_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/pulls/26/commits", "review_comments_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/pulls/26/comments", "review_comment_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/issues/26/comments", "statuses_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/statuses/007bc5a0f794bcabe6edab86b2f10038ce84a4d9", "head": {"label": "MothNik:11_multiple_right_hand_sides", "ref": "11_multiple_right_hand_sides", "sha": "007bc5a0f794bcabe6edab86b2f10038ce84a4d9", "user": {"login": "MothNik", "id": 70107495, "node_id": "MDQ6VXNlcjcwMTA3NDk1", "avatar_url": "https://avatars.githubusercontent.com/u/70107495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MothNik", "html_url": "https://github.com/MothNik", "followers_url": "https://api.github.com/users/MothNik/followers", "following_url": "https://api.github.com/users/MothNik/following{/other_user}", "gists_url": "https://api.github.com/users/MothNik/gists{/gist_id}", "starred_url": "https://api.github.com/users/MothNik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MothNik/subscriptions", "organizations_url": "https://api.github.com/users/MothNik/orgs", "repos_url": "https://api.github.com/users/MothNik/repos", "events_url": "https://api.github.com/users/MothNik/events{/privacy}", "received_events_url": "https://api.github.com/users/MothNik/received_events", "type": "User", "site_admin": false}, "repo": {"id": 805832782, "node_id": "R_kgDOMAgITg", "name": "pentapy", "full_name": "MothNik/pentapy", "private": false, "owner": {"login": "MothNik", "id": 70107495, "node_id": "MDQ6VXNlcjcwMTA3NDk1", "avatar_url": "https://avatars.githubusercontent.com/u/70107495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MothNik", "html_url": "https://github.com/MothNik", "followers_url": "https://api.github.com/users/MothNik/followers", "following_url": "https://api.github.com/users/MothNik/following{/other_user}", "gists_url": "https://api.github.com/users/MothNik/gists{/gist_id}", "starred_url": "https://api.github.com/users/MothNik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MothNik/subscriptions", "organizations_url": "https://api.github.com/users/MothNik/orgs", "repos_url": "https://api.github.com/users/MothNik/repos", "events_url": "https://api.github.com/users/MothNik/events{/privacy}", "received_events_url": "https://api.github.com/users/MothNik/received_events", "type": "User", "site_admin": false}, "html_url": "https://github.com/MothNik/pentapy", "description": "A Python toolbox for pentadiagonal linear systems", "fork": true, "url": "https://api.github.com/repos/MothNik/pentapy", "forks_url": "https://api.github.com/repos/MothNik/pentapy/forks", "keys_url": "https://api.github.com/repos/MothNik/pentapy/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/MothNik/pentapy/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/MothNik/pentapy/teams", "hooks_url": "https://api.github.com/repos/MothNik/pentapy/hooks", "issue_events_url": "https://api.github.com/repos/MothNik/pentapy/issues/events{/number}", "events_url": "https://api.github.com/repos/MothNik/pentapy/events", "assignees_url": "https://api.github.com/repos/MothNik/pentapy/assignees{/user}", "branches_url": "https://api.github.com/repos/MothNik/pentapy/branches{/branch}", "tags_url": "https://api.github.com/repos/MothNik/pentapy/tags", "blobs_url": "https://api.github.com/repos/MothNik/pentapy/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/MothNik/pentapy/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/MothNik/pentapy/git/refs{/sha}", "trees_url": "https://api.github.com/repos/MothNik/pentapy/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/MothNik/pentapy/statuses/{sha}", "languages_url": "https://api.github.com/repos/MothNik/pentapy/languages", "stargazers_url": "https://api.github.com/repos/MothNik/pentapy/stargazers", "contributors_url": "https://api.github.com/repos/MothNik/pentapy/contributors", "subscribers_url": "https://api.github.com/repos/MothNik/pentapy/subscribers", "subscription_url": "https://api.github.com/repos/MothNik/pentapy/subscription", "commits_url": "https://api.github.com/repos/MothNik/pentapy/commits{/sha}", "git_commits_url": "https://api.github.com/repos/MothNik/pentapy/git/commits{/sha}", "comments_url": "https://api.github.com/repos/MothNik/pentapy/comments{/number}", "issue_comment_url": "https://api.github.com/repos/MothNik/pentapy/issues/comments{/number}", "contents_url": "https://api.github.com/repos/MothNik/pentapy/contents/{+path}", "compare_url": "https://api.github.com/repos/MothNik/pentapy/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/MothNik/pentapy/merges", "archive_url": "https://api.github.com/repos/MothNik/pentapy/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/MothNik/pentapy/downloads", "issues_url": "https://api.github.com/repos/MothNik/pentapy/issues{/number}", "pulls_url": "https://api.github.com/repos/MothNik/pentapy/pulls{/number}", "milestones_url": "https://api.github.com/repos/MothNik/pentapy/milestones{/number}", "notifications_url": "https://api.github.com/repos/MothNik/pentapy/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/MothNik/pentapy/labels{/name}", "releases_url": "https://api.github.com/repos/MothNik/pentapy/releases{/id}", "deployments_url": "https://api.github.com/repos/MothNik/pentapy/deployments", "created_at": "2024-05-25T15:34:59Z", "updated_at": "2024-05-25T15:35:00Z", "pushed_at": "2024-07-23T19:44:47Z", "git_url": "git://github.com/MothNik/pentapy.git", "ssh_url": "git@github.com:MothNik/pentapy.git", "clone_url": "https://github.com/MothNik/pentapy.git", "svn_url": "https://github.com/MothNik/pentapy", "homepage": "https://pentapy.readthedocs.io/", "size": 497, "stargazers_count": 0, "watchers_count": 0, "language": null, "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": false, "has_pages": false, "has_discussions": false, "forks_count": 0, "mirror_url": null, "archived": false, "disabled": false, "open_issues_count": 0, "license": {"key": "mit", "name": "MIT License", "spdx_id": "MIT", "url": "https://api.github.com/licenses/mit", "node_id": "MDc6TGljZW5zZTEz"}, "allow_forking": true, "is_template": false, "web_commit_signoff_required": false, "topics": [], "visibility": "public", "forks": 0, "open_issues": 0, "watchers": 0, "default_branch": "main"}}, "base": {"label": "GeoStat-Framework:main", "ref": "main", "sha": "e78f674dc0d3e1af652616b5d922c88166f76e11", "user": {"login": "GeoStat-Framework", "id": 45686184, "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1Njg2MTg0", "avatar_url": "https://avatars.githubusercontent.com/u/45686184?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GeoStat-Framework", "html_url": "https://github.com/GeoStat-Framework", "followers_url": "https://api.github.com/users/GeoStat-Framework/followers", "following_url": "https://api.github.com/users/GeoStat-Framework/following{/other_user}", "gists_url": "https://api.github.com/users/GeoStat-Framework/gists{/gist_id}", "starred_url": "https://api.github.com/users/GeoStat-Framework/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GeoStat-Framework/subscriptions", "organizations_url": "https://api.github.com/users/GeoStat-Framework/orgs", "repos_url": "https://api.github.com/users/GeoStat-Framework/repos", "events_url": "https://api.github.com/users/GeoStat-Framework/events{/privacy}", "received_events_url": "https://api.github.com/users/GeoStat-Framework/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 174388643, "node_id": "MDEwOlJlcG9zaXRvcnkxNzQzODg2NDM=", "name": "pentapy", "full_name": "GeoStat-Framework/pentapy", "private": false, "owner": {"login": "GeoStat-Framework", "id": 45686184, "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1Njg2MTg0", "avatar_url": "https://avatars.githubusercontent.com/u/45686184?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GeoStat-Framework", "html_url": "https://github.com/GeoStat-Framework", "followers_url": "https://api.github.com/users/GeoStat-Framework/followers", "following_url": "https://api.github.com/users/GeoStat-Framework/following{/other_user}", "gists_url": "https://api.github.com/users/GeoStat-Framework/gists{/gist_id}", "starred_url": "https://api.github.com/users/GeoStat-Framework/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GeoStat-Framework/subscriptions", "organizations_url": "https://api.github.com/users/GeoStat-Framework/orgs", "repos_url": "https://api.github.com/users/GeoStat-Framework/repos", "events_url": "https://api.github.com/users/GeoStat-Framework/events{/privacy}", "received_events_url": "https://api.github.com/users/GeoStat-Framework/received_events", "type": "Organization", "site_admin": false}, "html_url": "https://github.com/GeoStat-Framework/pentapy", "description": "A Python toolbox for pentadiagonal linear systems", "fork": false, "url": "https://api.github.com/repos/GeoStat-Framework/pentapy", "forks_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/forks", "keys_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/teams", "hooks_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/hooks", "issue_events_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/issues/events{/number}", "events_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/events", "assignees_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/assignees{/user}", "branches_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/branches{/branch}", "tags_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/tags", "blobs_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/git/refs{/sha}", "trees_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/statuses/{sha}", "languages_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/languages", "stargazers_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/stargazers", "contributors_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/contributors", "subscribers_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/subscribers", "subscription_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/subscription", "commits_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/commits{/sha}", "git_commits_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/git/commits{/sha}", "comments_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/comments{/number}", "issue_comment_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/issues/comments{/number}", "contents_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/contents/{+path}", "compare_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/merges", "archive_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/downloads", "issues_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/issues{/number}", "pulls_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/pulls{/number}", "milestones_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/milestones{/number}", "notifications_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/labels{/name}", "releases_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/releases{/id}", "deployments_url": "https://api.github.com/repos/GeoStat-Framework/pentapy/deployments", "created_at": "2019-03-07T17:15:49Z", "updated_at": "2024-04-20T11:36:54Z", "pushed_at": "2024-07-23T19:44:48Z", "git_url": "git://github.com/GeoStat-Framework/pentapy.git", "ssh_url": "git@github.com:GeoStat-Framework/pentapy.git", "clone_url": "https://github.com/GeoStat-Framework/pentapy.git", "svn_url": "https://github.com/GeoStat-Framework/pentapy", "homepage": "https://pentapy.readthedocs.io/", "size": 385, "stargazers_count": 14, "watchers_count": 14, "language": "Python", "has_issues": true, "has_projects": false, "has_downloads": true, "has_wiki": false, "has_pages": false, "has_discussions": true, "forks_count": 4, "mirror_url": null, "archived": false, "disabled": false, "open_issues_count": 7, "license": {"key": "mit", "name": "MIT License", "spdx_id": "MIT", "url": "https://api.github.com/licenses/mit", "node_id": "MDc6TGljZW5zZTEz"}, "allow_forking": true, "is_template": false, "web_commit_signoff_required": false, "topics": ["linear-algebra", "linear-systems", "math", "matrix", "pentadiagonal-linear-systems", "python", "solvers", "toolbox"], "visibility": "public", "forks": 4, "open_issues": 7, "watchers": 14, "default_branch": "main"}}, "_links": {"self": {"href": "https://api.github.com/repos/GeoStat-Framework/pentapy/pulls/26"}, "html": {"href": "https://github.com/GeoStat-Framework/pentapy/pull/26"}, "issue": {"href": "https://api.github.com/repos/GeoStat-Framework/pentapy/issues/26"}, "comments": {"href": "https://api.github.com/repos/GeoStat-Framework/pentapy/issues/26/comments"}, "review_comments": {"href": "https://api.github.com/repos/GeoStat-Framework/pentapy/pulls/26/comments"}, "review_comment": {"href": "https://api.github.com/repos/GeoStat-Framework/pentapy/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/GeoStat-Framework/pentapy/pulls/26/commits"}, "statuses": {"href": "https://api.github.com/repos/GeoStat-Framework/pentapy/statuses/007bc5a0f794bcabe6edab86b2f10038ce84a4d9"}}, "author_association": "NONE", "auto_merge": null, "active_lock_reason": null, "resolved_issues": []}
